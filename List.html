<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>Document</title>

    <link rel="stylesheet" href="./index.html">
    <link rel="stylesheet" href="./normalize.css">
    <link rel="stylesheet" href="./List.css">

    <script src="./jquery-3.6.1.js"></script>

</head>
<body>
    <ul class="daohanglan">
        <li class="one"><a href="./index.html">首页</a></li>
        <li class="one"><a href="./List.html">列表页</a ></li>
        <li class="one"><a href="./intro.html">关于本站</a></li>
        <li class="one"><a href="./Form.html">登录注册</a ></li>
    </ul>

    <ul id="list">

    </ul>

    <div id="change">
        <p class="input">您想要添加的菜品名称：</p>
        <input type="text" id="name" class="input">
        <br>
        <p class="pic">图片地址：</p>
        <input type="text" id="pic" class="pic">
        <br>
        <p class="textarea">它的简述：</p>
        <textarea id="introduce" cols="30" rows="10" class="textarea"></textarea>
        <br>
        <p class="select">推荐指数：</p>
        <select id="star" class="select">
            <option value="一星">一星</option>
            <option value="二星">二星</option>
            <option value="三星">三星</option>
            <option value="四星">四星</option>
            <option value="五星">五星</option>
        </select><br>
        <p class="res">推荐餐厅：</p>
        <input type="text" id="res" class="res">
        <br>
        <button id="add" class="button">添加</button>
    </div>
    
    <script>
        localStorage.setItem("东坡肉",JSON.stringify({
            foodname:"东坡肉",
            foodstar:"五星",
            picture:"https://bkimg.cdn.bcebos.com/pic/37d3d539b6003af388d574eb382ac65c1138b6ca?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U5Mg==,g_7,xp_5,yp_5",
            foodintro:"东坡肉的主料和造型大同小异，主料都是半肥半瘦的猪肉，加入配料焖制而成，成品菜都是码得整整齐齐的麻将块儿，红得透亮，色如玛瑙，入口软而不烂，肥而不腻。",
            restaurant:"楼外楼(孤山路店) . 望园饭店(虎跑路店)",
        }))
        localStorage.setItem("西湖藕粉",JSON.stringify({
            foodname:"西湖藕粉",
            foodstar:"五星",
            picture:"https://bkimg.cdn.bcebos.com/pic/29381f30e924b899183f2e4367061d950a7bf64e?x-bce-process=image/resize,m_lfit,w_268,limit_1",
            foodintro:"西湖藕粉是浙江省杭州市的一种名优特产；其风味独特，富含营养，旧时是为皇家提供“贡粉”。 藕是荷花在地下的茎，经特别加工制成的藕粉，呈薄片状，质地细滑，色泽白中透红。服用时只需先用少量冷水调和，再用开水冲调成糊状即可，冲泡后的藕粉晶莹透明，口味清醇，有生津开胃，养血益气的功效，是极适用于婴孩、老人、病人的滋补品。",
            restaurant:"佳藕天成(中山中路27号-29号)",
        }))
        localStorage.setItem("龙井虾仁",JSON.stringify({
            foodname:"龙井虾仁",
            foodstar:"四星",
            picture:"https://bkimg.cdn.bcebos.com/pic/6609c93d70cf3bc750931f44db00baa1cc112a83?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2UxMTY=,g_7,xp_5,yp_5",
            foodintro:"龙井虾仁将茶饮与虾仁融合，整体清新软嫩，虾仁玉白，鲜嫩，芽叶清香，色泽雅丽，虾中有茶香，茶中有虾鲜，食后清口开胃，回味无穷。",
            restaurant:"杭州酒家(延安路店) . 桂满陇(中山公园店)",
        }))
        localStorage.setItem("西湖醋鱼",JSON.stringify({
            foodname:"西湖醋鱼",
            foodstar:"四星",
            picture:"https://bkimg.cdn.bcebos.com/pic/00e93901213fb80e6f3935ac3fd12f2eb83894e4?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U4MA==,g_7,xp_5,yp_5",
            foodintro:"西湖醋鱼（West Lake Fish in Vinegar Gravy），又名“叔嫂传珍”“宋嫂鱼”，前身为“宋嫂鱼羹”，是中国浙江省杭州市传统风味名菜，为浙江菜系。 西湖醋鱼主以草鱼等食材用料烹制，色泽红亮，肉质鲜嫩，酸甜清香，口感软嫩，带有蟹味。",
            restaurant:"皇饭儿(高银街总店) . 知味观味庄(杨公堤店)",
        }))
        localStorage.setItem("片儿川",JSON.stringify({
            foodname:"片儿川",
            foodstar:"三星",
            picture:"https://bkimg.cdn.bcebos.com/pic/1b4c510fd9f9d72a6059720d0b603f34349b033b0dc2?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2UxNTA=,g_7,xp_5,yp_5",
            foodintro:"片儿川是浙江省杭州市的一道特色名菜，也是杭州奎元馆的名点，其浇头主要由雪菜、笋片、瘦肉片组成，鲜美可口，此菜已有百余年历史，最早由杭州市区老店奎元馆首创，其特色在于倒笃菜和笋片的鲜美，让食客吃后回味无穷。",
            restaurant:"方老大面(江城路店) . 菊英面馆(中山南路店)",
        }))
        localStorage.setItem("叫化童子鸡",JSON.stringify({
            foodname:"叫化童子鸡",
            foodstar:"三星",
            picture:"https://bkimg.cdn.bcebos.com/pic/622762d0f703918fa0ec05b85977319759ee3d6d6e25?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2UxMTY=,g_7,xp_5,yp_5",
            foodintro:"叫化童子鸡是浙江省杭州市的一道传统名菜，属于浙菜系-杭州菜；此菜鸡身白净，肉酥离骨，食不嵌齿。相传，古代有一个流落到江南的叫化子，一天由于饥寒交迫而昏倒，难友为他偷来一只小母鸡却又苦于缺锅少灶，就用泥把鸡饲包起来放入火堆中煨烤，剥开食时，竟意外地发现此鸡香气四溢，味道极好。后来这一方法传到酒楼，经厨师的不断改进，在传统制作方法基础上加以改进，选用肥嫩越鸡，以竹箬壳、鲜荷叶包裹，最外层包上酒坛泥，先用猛火，后改文火煨成。现制现吃，清香扑鼻，鲜嫩可口，终成名菜。",
            restaurant:"楼外楼(孤山路店) . 知味观(湖滨店) . 吴山广场",
        }))

    
        for(let i=0;i<localStorage.length;i++){
            let key =localStorage.key(i)
        try{
            JSON.parse(localStorage.getItem(key))
        }catch(e){
            continue
        }
      
     
        let obj=JSON.parse(localStorage.getItem(key))
      
      
      
        if(obj.foodname.startsWith("#")){
            var foodname=obj.foodname.substring(1)
        }
        else{
            var foodname=obj.foodname
        } 
        let foodstar=obj.foodstar
        let foodintro=obj.foodintro
        let picture=obj.picture
        let restaurant=obj.restaurant

        if(!obj.foodname.startsWith("#")){
            let str=`<li class="li"><h2>${foodname}</h2>
            <p class="margin10">推荐指数:${foodstar}</p>
            <p class="intro">${foodintro}</p>
            <img src=${picture} class="img">
            <p class="margin10">推荐餐厅:${restaurant}</p>
            </li>`
            $("#list").append(str)
        }
        else{
            let str=`<li class="li"><h2>${foodname}</h2>
            <p class="margin10">推荐指数:${foodstar}</p>
            <p class="intro">${foodintro}</p>
            <img src=${picture} class="img">
            <p class="margin10">推荐餐厅:${restaurant}</p>
            <button class="del">del</button></li>`

       
            $("#list").append(str)
            $(".del").click(function(){
                let foodname=$(this).siblings()[0].innerText
                localStorage.removeItem(foodname)
                $(this).parent().remove()  
            })

        }
    }
    

    $("#add").click(function(){
        let foodname=$("#name").val()
        let foodintro=$("#introduce").val()
        let picture=$("#pic").val()
        let restaurant=$("#res").val()
        let foodstar=$("#star option:selected").val()
            let obj={}
            obj.foodname="#"+foodname
            obj.picture=picture
            obj.foodintro=foodintro
            obj.foodstar=foodstar
            obj.restaurant=restaurant
        localStorage.setItem(foodname,JSON.stringify(obj))
        let str=`<li class="li"><h2>${foodname}</h2>
        <p class="margin10">推荐指数:${foodstar}</p>
        <p class="intro">${foodintro}</p>
        <img src=${picture} class="img">
        <p class="margintop">推荐餐厅:${restaurant}</p>
        <button class="del">del</button></li>`
      
        $("#list").append(str)


        $(".del").click(function(){
            let foodname=$(this).siblings()[0].innerText
            localStorage.removeItem(foodname)
            $(this).parent().remove()
        })
    })
      </script>
</body>
</html>
